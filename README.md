# Exchange Rates
Airflow DAG for incremental extraction of currency exchange rates, storing historical data as Parquet files for transaction conversion to USD. Includes Docker setup and GCP integration.

## System Setup (Linux)
1. Clone the repository:

   ```bash
    git clone "https://github.com/DimaKuriptya/ExchangeRates.git"
   ```
2. Create a key for `GCP Service Account` which has write access to the `GCP Bucket` with parquet files. Put the json file which was generated right after the key creation into the config folder so you have the following structure:

   ```bash
    project_root/
    └── config/
        └── skelar-477222-84b8a172fdc2.json 
   ```
3. Create a file `.env` inside the parent folder. Fill the file by the folowing template:

   ```bash
    AIRFLOW_UID=50000
    APP_ID=(app_id generated by the API service)
    GCP_PROJECT_ID=skelar-477222
    GCP_BUCKET_NAME=exchange_rates_task_3
    GOOGLE_APPLICATION_CREDENTIALS=/opt/airflow/config/skelar-477222-84b8a172fdc2.json
   ```
   `GOOGLE_APPLICATION_CREDENTIALS` - replace the file name with the file you put in config folder in the previous step
4. Run docker compose build command:

   ```bash
   docker compose build
   ```
5. Start the services in detached mode:

   ```bash
   docker-compose up -d
   ```
6. Launch the Airflow web UI.

   ```bash
    open http://localhost:8080
   ```
   Default credentials: username `airflow`, password `airflow`
